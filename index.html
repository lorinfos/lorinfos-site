<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"a content="width=device-width, initial-scale=1" />
  <title>LORINFOS</title>
  <meta name="description" content="Des √©nigmes courtes pour tester ta logique." />
  <meta name="theme-color" content="#0b0b0d" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0b0d;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.14);

      --text:#f2f2f2;
      --muted: rgba(242,242,242,.72);

      --gold1:#F2D37A;
      --gold2:#D7A11E;
      --goldGlow: rgba(215,161,30,.35);

      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --radiusXL: 28px;
      --radiusL: 22px;
      --radiusM: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 20% 10%, rgba(215,161,30,.22), transparent 55%),
                  radial-gradient(900px 500px at 80% 20%, rgba(242,211,122,.15), transparent 55%),
                  radial-gradient(900px 700px at 50% 90%, rgba(255,255,255,.05), transparent 60%),
                  var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    .wrap{
      width:min(980px, 92vw);
      margin: 26px auto 40px;
    }

    /* Header card */
    .hero{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radiusXL);
      box-shadow: var(--shadow);
      padding: 18px 16px 16px;
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 240px at 10% 0%, rgba(215,161,30,.20), transparent 55%),
                  radial-gradient(680px 240px at 90% 0%, rgba(242,211,122,.12), transparent 60%);
      pointer-events:none;
      filter: blur(2px);
    }
    .hero > *{position:relative}

    .brand{
      display:flex;
      gap: 14px;
      align-items:center;
      padding: 6px 2px 2px;
    }
    .logo{
      width:64px;
      height:64px;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.45);
      object-fit: cover;
      flex:0 0 auto;
    }
    .brandText h1{
      margin:0;
      font-size: 42px;
      letter-spacing: 1.2px;
      line-height:1.05;
      font-weight: 800;
      text-transform: uppercase;
    }
    .brandText p{
      margin:8px 0 0;
      color: var(--muted);
      line-height:1.4;
      font-weight: 600;
      font-size: 15px;
    }

    /* Top buttons = full width like before */
    .topActions{
      margin-top: 16px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      padding: 0 2px 6px;
    }
    .bigBtn{
      width:100%;
      border:0;
      border-radius: 999px;
      padding: 16px 18px;
      font-weight: 800;
      font-size: 18px;
      letter-spacing: .2px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, opacity .12s ease;
      user-select:none;
    }
    .bigBtn:active{ transform: scale(.99); }
    .bigBtn.primary{
      color:#1a1300;
      background: linear-gradient(180deg, var(--gold1), var(--gold2));
      box-shadow: 0 12px 30px rgba(215,161,30,.25), 0 0 0 1px rgba(0,0,0,.25) inset;
    }
    .bigBtn.secondary{
      color: var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 14px 30px rgba(0,0,0,.35);
    }
    .bigBtn.inactive{
      opacity: .70;
      filter: saturate(.95);
    }

    /* Sections titles */
    .sectionTitle{
      margin: 18px 2px 10px;
      font-weight: 900;
      font-size: 44px;
      letter-spacing: .2px;
      display:flex;
      align-items:flex-start;
      gap: 10px;
      line-height: 1.02;
      text-shadow: 0 10px 40px rgba(0,0,0,.55);
    }
    .sectionTitle .emoji{
      font-size: 36px;
      filter: drop-shadow(0 12px 18px rgba(0,0,0,.5));
      margin-top: 3px;
    }

    /* Info banner */
    .banner{
      margin: 10px 2px 22px;
      padding: 14px 16px;
      border-radius: var(--radiusL);
      background: linear-gradient(180deg, rgba(215,161,30,.16), rgba(255,255,255,.05));
      border: 1px solid rgba(242,211,122,.18);
      color: rgba(242,242,242,.85);
      line-height: 1.45;
      box-shadow: 0 14px 40px rgba(0,0,0,.45);
    }
    .banner strong{color: var(--text)}
    .banner .warn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      font-weight: 700;
    }

    /* Cards */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.045));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radiusXL);
      padding: 16px 16px 18px;
      box-shadow: var(--shadow);
      margin: 0 2px 14px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      font-weight: 800;
      letter-spacing: .2px;
    }
    .question{
      margin: 14px 2px 14px;
      font-size: 22px;
      line-height: 1.35; /* un peu + a√©r√© */
      font-weight: 700;
      color: rgba(242,242,242,.92);
    }
    .cta{
      width:100%;
      border:0;
      border-radius: 999px;
      padding: 14px 16px;
      font-weight: 900;
      font-size: 18px;
      cursor:pointer;
      background: linear-gradient(180deg, var(--gold1), var(--gold2));
      color:#1a1300;
      box-shadow: 0 12px 28px rgba(215,161,30,.22);
      transition: transform .12s ease;
    }
    .cta:active{ transform: scale(.99); }
    .hint{
      margin: 10px 2px 0;
      color: rgba(242,242,242,.72); /* l√©g√®rement plus discret */
      font-weight: 600;
      line-height:1.35;
      font-size: 14px;
    }

    /* Resources */
    .resourceItem{
      display:flex;
      flex-direction:column;
      gap:10px;
      padding: 14px 14px 16px;
      border-radius: var(--radiusL);
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.12);
      margin: 0 2px 12px;
    }
    .resourceItem h3{
      margin:0;
      font-size: 18px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .resourceItem p{
      margin:0;
      color: rgba(242,242,242,.75);
      line-height: 1.4;
      font-weight: 600;
      font-size: 14px;
    }
    .resourceItem a{
      display:inline-flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      width:100%;
      text-decoration:none;
      border-radius: 999px;
      padding: 12px 14px;
      font-weight: 900;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text);
    }

    footer{
      margin-top: 18px;
      text-align:center;
      color: rgba(242,242,242,.55);
      font-weight: 700;
      letter-spacing:.2px;
      font-size: 13px;
    }

    /* Modal centered (mi-√©cran) */
    .overlay{
      position: fixed;
      inset: 0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(0,0,0,.58);
      backdrop-filter: blur(7px);
      -webkit-backdrop-filter: blur(7px);
      z-index: 9999;
    }
    .overlay.open{ display:flex; }

    .modal{
      width: min(560px, 92vw);
      border-radius: 22px;
      background: rgba(20,20,22,.95);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 24px 80px rgba(0,0,0,.7);
      overflow:hidden;
      transform: translateY(6px);
      animation: pop .16s ease-out forwards;
    }
    @keyframes pop{
      to{ transform: translateY(0); }
    }
    .modalHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .modalHeader .title{
      font-weight: 900;
      letter-spacing: .2px;
      font-size: 16px;
      color: rgba(242,242,242,.95);
    }
    .closeBtn{
      width:38px;
      height:38px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(242,242,242,.85);
      font-size: 18px;
      cursor:pointer;
    }
    .modalBody{
      padding: 14px 14px 16px;
      line-height:1.5;
      color: rgba(242,242,242,.92);
      font-weight: 700;
    }
    .modalBody .label{
      display:block;
      margin-bottom: 8px;
      color: rgba(242,242,242,.75);
      font-weight: 800;
      letter-spacing: .2px;
    }

    /* Utilities */
    .hidden{display:none !important}

    /* Mobile tweaks */
    @media (max-width:420px){
      .brandText h1{ font-size: 36px; }
      .sectionTitle{ font-size: 40px; }
      .question{ font-size: 20px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hero">
      <div class="brand">
        <img class="logo" src="logo.png" alt="Logo LORINFOS">
        <div class="brandText">
          <h1>LORINFOS</h1>
          <p>Des √©nigmes courtes pour tester ta logique.<br>La plupart se trompent.</p>
        </div>
      </div>

      <div class="topActions">
        <button id="btnEnigmes" class="bigBtn primary" type="button">üß© √ânigmes &amp; R√©ponses</button>
        <button id="btnRessources" class="bigBtn secondary inactive" type="button">üß† Muscler son cerveau</button>
      </div>
    </div>

    <!-- √âNIGMES -->
    <h2 id="titleEnigmes" class="sectionTitle"><span class="emoji">üß©</span><span>√ânigmes &amp;<br>R√©ponses</span></h2>

    <div class="banner" id="bannerEnigmes">
      <span class="warn">‚ö†Ô∏è <strong>Pour faire vivre le site</strong>, certaines r√©ponses peuvent ouvrir une courte publicit√©.</span>
      <br>
      Ferme simplement l‚Äôonglet de pub et reviens ici : <strong>la r√©ponse s‚Äôaffiche ensuite</strong>.
    </div>

    <div id="enigmesContainer"></div>

    <!-- RESSOURCES -->
    <h2 id="titleRessources" class="sectionTitle"><span class="emoji">üß†</span><span>Muscler son<br>cerveau</span></h2>
    <div id="ressourcesContainer"></div>

    <footer>¬© LORINFOS ‚Äî Tous droits r√©serv√©s.</footer>
  </div>

  <!-- MODAL -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div class="modalHeader">
        <div id="modalTitle" class="title">R√©ponse</div>
        <button id="closeModal" class="closeBtn" aria-label="Fermer">√ó</button>
      </div>
      <div class="modalBody">
        <span class="label">R√©ponse :</span>
        <div id="modalText"></div>
      </div>
    </div>
  </div>

  <script>
    // ---------- Helpers ----------
    const $ = (id) => document.getElementById(id);

    function setHash(section){
      // section: "enigmes" | "ressources"
      location.hash = section === "ressources" ? "#ressources" : "#enigmes";
    }

    function showSection(section){
      const isEnigmes = section !== "ressources";

      $("titleEnigmes").classList.toggle("hidden", !isEnigmes);
      $("bannerEnigmes").classList.toggle("hidden", !isEnigmes);
      $("enigmesContainer").classList.toggle("hidden", !isEnigmes);

      $("titleRessources").classList.toggle("hidden", isEnigmes);
      $("ressourcesContainer").classList.toggle("hidden", isEnigmes);

      // Buttons states
      $("btnEnigmes").classList.toggle("primary", isEnigmes);
      $("btnEnigmes").classList.toggle("secondary", !isEnigmes);
      $("btnEnigmes").classList.toggle("inactive", !isEnigmes);

      $("btnRessources").classList.toggle("primary", !isEnigmes);
      $("btnRessources").classList.toggle("secondary", isEnigmes);
      $("btnRessources").classList.toggle("inactive", isEnigmes);

      // Scroll to top of section smoothly
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // ---------- Modal ----------
    function openModal(title, text){
      $("modalTitle").textContent = title || "R√©ponse";
      $("modalText").textContent = text || "";
      $("overlay").classList.add("open");
      $("overlay").setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden"; // bloque scroll derri√®re
    }
    function closeModal(){
      $("overlay").classList.remove("open");
      $("overlay").setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    $("closeModal").addEventListener("click", closeModal);
    $("overlay").addEventListener("click", (e) => {
      if (e.target === $("overlay")) closeModal();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });

    // ---------- Data loading ----------
    async function loadJSON(path){
      const res = await fetch(path, { cache: "no-store" });
      if(!res.ok) throw new Error("Impossible de charger " + path);
      return await res.json();
    }

    function renderEnigmes(data){
      const container = $("enigmesContainer");
      container.innerHTML = "";

      const enigmes = (data && data.enigmes) ? data.enigmes : [];
      if(enigmes.length === 0){
        container.innerHTML = `
          <div class="card">
            <div class="question">Aucune √©nigme pour l‚Äôinstant.</div>
          </div>
        `;
        return;
      }

      enigmes.forEach((e) => {
        const card = document.createElement("div");
        card.className = "card";

        const badge = e.badge ? e.badge + " " : "";
        const titre = e.titre || `√ânigme #${e.id || ""}`;
        const q = e.question || "";
        const astuce = e.astuce || "";
        const rep = e.reponse || "";

        card.innerHTML = `
          <div class="pill">${badge}${titre}</div>
          <div class="question">${q}</div>
          <button class="cta" type="button">üëâ Voir la r√©ponse</button>
          ${astuce ? `<div class="hint">${astuce}</div>` : ``}
        `;

        card.querySelector(".cta").addEventListener("click", () => {
          // Ici tu mettras ton syst√®me pub/affiliation si besoin
          openModal(titre, rep);
        });

        container.appendChild(card);
      });
    }

    function renderRessources(data){
      const container = $("ressourcesContainer");
      container.innerHTML = "";

      const ressources = (data && data.ressources) ? data.ressources : [];

      if(ressources.length === 0){
        container.innerHTML = `
          <div class="card">
            <div class="question">Aucune ressource pour l‚Äôinstant. Ajoute-en dans <strong>ressources.json</strong> ‚úÖ</div>
            <div class="hint">Bient√¥t disponible üëÄ</div>
          </div>
        `;
        return;
      }

      ressources.forEach((r) => {
        const item = document.createElement("div");
        item.className = "resourceItem";

        const titre = r.titre || "Ressource";
        const desc = r.description || "";
        const url = r.url || "#";

        item.innerHTML = `
          <h3>${titre}</h3>
          <p>${desc}</p>
          <a href="${url}" target="_blank" rel="noopener">üõí Voir la ressource</a>
        `;
        container.appendChild(item);
      });
    }

    // ---------- Init ----------
    (async function init(){
      // Buttons navigation
      $("btnEnigmes").addEventListener("click", () => setHash("enigmes"));
      $("btnRessources").addEventListener("click", () => setHash("ressources"));

      // Routing based on hash
      function applyRoute(){
        const h = (location.hash || "#enigmes").toLowerCase();
        const section = h.includes("ressource") ? "ressources" : "enigmes";
        showSection(section);
      }
      window.addEventListener("hashchange", applyRoute);

      // Load data
      try{
        const enigmesData = await loadJSON("enigmes.json");
        renderEnigmes(enigmesData);
      }catch(err){
        console.error(err);
        $("enigmesContainer").innerHTML = `
          <div class="card">
            <div class="question">Erreur : impossible de charger <strong>enigmes.json</strong>.</div>
            <div class="hint">V√©rifie le nom du fichier (minuscules) et qu‚Äôil est au m√™me endroit que index.html.</div>
          </div>
        `;
      }

      try{
        const ressourcesData = await loadJSON("ressources.json");
        renderRessources(ressourcesData);
      }catch(err){
        console.error(err);
        $("ressourcesContainer").innerHTML = `
          <div class="card">
            <div class="question">Erreur : impossible de charger <strong>ressources.json</strong>.</div>
            <div class="hint">V√©rifie le nom du fichier (minuscules) et qu‚Äôil est au m√™me endroit que index.html.</div>
          </div>
        `;
      }

      // Default route
      if(!location.hash) location.hash = "#enigmes";
      applyRoute();
    })();
  </script>
</body>
</html>
